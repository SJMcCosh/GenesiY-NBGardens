<ui:composition xmlns="https://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="templates/template.xhtml">
	<meta charset="ISO-8859-1" />
	<ui:define name="maincontent">

		<f:metadata>
			<f:event type="preRenderView" listener="#{filter.load}" />
		</f:metadata>

		<div class="row">
			<!-- Main content for the page -->


			<h:form class="col-3 col-m-6 tagbar">
				<h:selectManyCheckbox layout="pageDirection"
					value="#{filter.filter}">
					<f:selectItems value="#{products.tagModel}" var="tag"
						itemLabel="#{tag.name}" itemValue="#{tag.name}" />
					<f:ajax listener="#{filter.filterProducts}" render="@all" />
				</h:selectManyCheckbox>

			</h:form>



			<h:form>
				<div class="col-9 col-m-6">
					<h:selectOneMenu value="#{sort.sorter}">
						<f:selectItem itemLabel="Rating" itemValue="Rating" />
						<f:selectItem itemLabel="Price Low to High"
							itemValue="Price Low to High" />
						<f:selectItem itemLabel="Price High to Low"
							itemValue="Price High to Low" />
						<f:ajax listener="#{sort.sort}" render="@all" />
					</h:selectOneMenu>
				</div>


			</h:form>
			<!-- Pagination bit -->
			<div>
				<div>
					<h:form>
						<h:outputText escape="false" value="No Products Found"
							rendered="#{products.dataModel.rowCount == 0}" />
						<h:panelGroup rendered="#{products.dataModel.rowCount > 0}">
							<h:outputText
								value="#{products.pagination.pageFirstItem + 1} to #{products.pagination.pageLastItem + 1} of #{products.pagination.itemsCount}" />
							<h:commandButton value="Previous #{products.pagination.pageSize}"
								action="#{products.previous}"
								rendered="#{products.pagination.hasPreviousPage}" />
							<h:commandButton value="Next #{products.pagination.pageSize}"
								action="#{products.next}"
								rendered="#{products.pagination.hasNextPage}" />
						</h:panelGroup>
					</h:form>
				</div>
				<h:form>
				<div class="col-9 col-m-6">
					<h:selectOneMenu value="#{products.numProds}">
						<f:selectItem itemLabel="12" itemValue="12" />
						<f:selectItem itemLabel="24" itemValue="24" />
						<f:selectItem itemLabel="36" itemValue="36" />
						<f:ajax listener="#{products.updateNumber}" render="@all" />
					</h:selectOneMenu>
				</div>


			</h:form>
				<!-- This is the product grid -->

				<div class="col-9 col-m-6">
					<ul>
						<ui:repeat var="product" value="#{products.dataModel}">
							<div class="col-3 col-m-6">
							<div class = "productlist">
								<h:form>
									<h:commandLink action="#{products.viewProduct(product)}">
										<div class="subcat_images">
											<img class="subcat_images" src="#{product.imageLocation}" />
											<ul>
												<li><h:outputText value="#{product.name}"
														class="index_featured_products_product_title" /></li>
												<li><h:outputText value="#{product.price}"
														class="index_featured_products_product_price" /></li>
												<li><h:outputText value="#{product.averageRating}"
														class="index_featured_products_product_price" /></li>
											</ul>
											
										</div>
				
									</h:commandLink>
								</h:form>
								</div>
							</div>
						</ui:repeat>

					</ul>

				</div>
				<!-- Pagination bit -->
				<div class = "class-12 class-m-12">
					<div class = "paginatorbutton">
						<h:form>
							<h:outputText escape="false" value="No Products Found"
								rendered="#{products.dataModel.rowCount == 0}" />
							<h:panelGroup rendered="#{products.dataModel.rowCount > 0}">
								<h:outputText
									value="#{products.pagination.pageFirstItem + 1} to #{products.pagination.pageLastItem + 1} of #{products.pagination.itemsCount}" />
								<h:commandButton
									value="Previous #{products.pagination.pageSize}"
									action="#{products.previous}"
									rendered="#{products.pagination.hasPreviousPage}" />
								<h:commandButton value="Next #{products.pagination.pageSize}"
									action="#{products.next}"
									rendered="#{products.pagination.hasNextPage}" />
							</h:panelGroup>
						</h:form>
					</div>

				</div>
			</div>
		</div>
	</ui:define>
</ui:composition>